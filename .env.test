# Integration test environment shared across apps.
# `pnpm infra:test:start` refreshes connection strings below using docker/test/compose.yml.
# Secrets are intentionally local-only placeholders; replace if pointing to real infra.

NODE_ENV=test
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET="integration-test-secret"

# Database (Postgres 16)
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=54330
POSTGRES_USER=usesend
POSTGRES_PASSWORD=password
POSTGRES_DB=usesend_test
DATABASE_URL_TEST=postgresql://usesend:password@127.0.0.1:54330/usesend_test
DATABASE_URL=postgresql://usesend:password@127.0.0.1:54330/usesend_test

# Redis 7
REDIS_HOST=127.0.0.1
REDIS_PORT=6380
REDIS_URL_TEST=redis://127.0.0.1:6380
REDIS_URL=redis://127.0.0.1:6380

# Local SES/SNS shim
SES_SNS_PORT=5351
AWS_ACCESS_KEY=testing
AWS_SECRET_KEY=testing
AWS_DEFAULT_REGION=us-east-1
AWS_SES_ENDPOINT=http://127.0.0.1:5351/api/ses
AWS_SNS_ENDPOINT=http://127.0.0.1:5351/api/sns

# MinIO object storage
MINIO_API_PORT=9302
MINIO_CONSOLE_PORT=9301
S3_COMPATIBLE_ACCESS_KEY=unsend
S3_COMPATIBLE_SECRET_KEY=password
S3_COMPATIBLE_BUCKET=unsend-test
S3_COMPATIBLE_API_URL=http://127.0.0.1:9302
S3_COMPATIBLE_PUBLIC_URL=http://127.0.0.1:9302

# Email + rate limiting defaults
SMTP_HOST=localhost
SMTP_USER=test
FROM_EMAIL=hello+test@usesend.com
API_RATE_LIMIT=2
AUTH_EMAIL_RATE_LIMIT=5
NEXT_PUBLIC_IS_CLOUD=false
